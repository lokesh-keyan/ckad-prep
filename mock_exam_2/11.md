# Mock Exam 2 - Question 11

## Question 11: Deployment and NodePort Service

For this scenario, create a deployment named `hr-web-app-ckad05-svcn` using the image `kodekloud/webapp-color` with **2 replicas**.

Expose the `hr-web-app-ckad05-svcn` with service named `hr-web-app-service-ckad05-svcn` on port **30082** on the nodes of the cluster.

> **Note**: The web application listens on port **8080**.

## Solution

### Step 1: Create Deployment

```bash
kubectl create deployment hr-web-app-ckad05-svcn --image=kodekloud/webapp-color --replicas=2
```

### Step 2: Generate Service YAML

```bash
kubectl expose deployment hr-web-app-ckad05-svcn --type=NodePort --port=8080 --name=hr-web-app-service-ckad05-svcn --dry-run=client -o yaml > hr-web-app-service-ckad05-svcn.yaml
```

### Step 3: Edit Service YAML

```yaml
apiVersion: v1
kind: Service
metadata:
  name: hr-web-app-service-ckad05-svcn
  namespace: default
spec:
  type: NodePort
  selector:
    app: hr-web-app-ckad05-svcn
  ports:
  - port: 8080
    targetPort: 8080
    nodePort: 30082   # ðŸ‘ˆ you add this manually
```

### Step 4: Apply the Service

```bash
kubectl apply -f hr-web-app-service-ckad05-svcn.yaml
```

