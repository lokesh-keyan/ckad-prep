# Mock Exam 1 - Question 10

## Question 10: External Service Configuration

We have also created a service called `external-webserver-ckad01-svcn` that can connect to our local webserver from within the cluster3 but, at the moment, it is not working as expected.

Fix the issue so that other pods within cluster3 can use `external-webserver-ckad01-svcn` service to access the webserver.

### Solution:

```bash
kubectl get nodes -o wide
```

**Endpoints YAML**

```yaml
apiVersion: v1
kind: Endpoints
metadata:
  name: external-webserver-ckad01-svcn
  namespace: dev-001
subsets:
  - addresses:
      - ip: 192.168.140.139
    ports:
      - port: 9999
```

---

## Service Types Reference

### 1. ClusterIP (default Service type)

Creates a virtual IP (clusterIP) that is only reachable inside the cluster.

Other Pods/Services can reach it via DNS:
```
http://<service-name>.<namespace>.svc.cluster.local:<port>
```

Not accessible from outside the cluster (unless you add Ingress or port-forward).

✅ **Use case**: internal-only services (DB, backend microservice).

**Example:**

```yaml
apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  type: ClusterIP
  selector:
    app: myapp
  ports:
    - port: 80
      targetPort: 8080
```

### 2. NodePort

Exposes the Service on a static port (30000–32767) on every node's IP.

Traffic from outside → `<NodeIP>:<NodePort>` → forwarded to the Service → Pod.

Still has a ClusterIP behind the scenes, NodePort just adds external access.

✅ **Use case**: quick testing or exposing apps without a LoadBalancer.

**Example:**

```yaml
apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  type: NodePort
  selector:
    app: myapp
  ports:
    - port: 80         # service port (inside cluster)
      targetPort: 8080 # container port
      nodePort: 30080  # static external port (optional, else auto-assign)
```

User → frontend-svc → frontend Pod → backend-svc → backend Pod → db-svc → database

Pod (app) → Service (ClusterIP = "external-db") → Endpoints → External system
