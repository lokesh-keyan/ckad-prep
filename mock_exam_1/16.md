# Mock Exam 1 - Question 16

## Question 16: Secret Creation and Pod Configuration

We have already deployed the required pods and services in the namespace `ckad01-db-sec`.

Create a new secret named `ckad01-db-scrt-aecs` with the data given below:

**Secret Requirements:**

- **Secret Name**: `ckad01-db-scrt-aecs`
- **Secret 1**: `DB_Host=sql01`
- **Secret 2**: `DB_User=root`
- **Secret 3**: `DB_Password=password123`

Configure `ckad01-mysql-server` to load environment variables from the newly created secret, where the keys from the secret should become the environment variable name in the Pod.

### Step 1: Create the Secret

```bash
kubectl create secret generic ckad01-db-scrt-aecs \
  --from-literal=DB_Host=sql01 \
  --from-literal=DB_User=root \
  --from-literal=DB_Password=password123 \
  -n ckad01-db-sec
```

**Output:**

```text
secret/ckad01-db-scrt-aecs created
```

### Step 2: Verify the Secret

```bash
k get secret ckad01-db-scrt-aecs -n ckad01-db-sec -o yaml
```

**Output:**

```yaml
apiVersion: v1
data:
  DB_Host: c3FsMDE=
  DB_Password: cGFzc3dvcmQxMjM=
  DB_User: cm9vdA==
kind: Secret
metadata:
  creationTimestamp: "2025-08-29T16:08:03Z"
  name: ckad01-db-scrt-aecs
  namespace: ckad01-db-sec
  resourceVersion: "6586"
  uid: 965c40f3-5009-48dd-ab70-32b2391ae233
type: Opaque
```

### Step 3: Update the Pod Configuration

```bash
k get pod ckad01-mysql-server -n ckad01-db-sec -o yaml > server-pod.yaml
```

**Modified Pod YAML:**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: ckad01-mysql-server
  namespace: ckad01-db-sec
  labels:
    name: ckad01-mysql-server
spec:
  containers:
  - image: kodekloud/simple-webapp-mysql
    name: webapp
    envFrom:
    - secretRef:
        name: ckad01-db-scrt-aecs   # ðŸ‘ˆ your secret name
```

### Step 4: Apply Changes

Delete the pod and recreate it:

```bash
kubectl delete pod ckad01-mysql-server -n ckad01-db-sec
kubectl apply -f server-pod.yaml
```